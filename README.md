# Income–Life-Expectancy Correlation in Spanish Provinces (2015-2022)

Is economic prosperity linked to a longer post-retirement lifespan?  
This project quantifies the relationship between **average gross income
per person** and **remaining life expectancy at age 65** across Spain’s
52 provinces for the period **2015 – 2022**.

## Hypothesis
> **H₁:** Provinces with higher average gross income show a higher
> life expectancy at age 65.  
> **H₀:** There is no linear correlation between the two variables.

```bash
.
├── data/ # life_expectancy.csv, rent.csv
├── src/ # dataset_loader.py, cleaner.py, analysis.py…
├── plots/ # PNG scatter plots generated by main script
├── tests/ # pytest unit tests
└──main_multi_year.py # CLI pipeline (2015-2022)
```

## Requirements
* Python ≥ 3.9  
* Packages: `pandas >=2.0`, `numpy`, `matplotlib`, `scipy`, `chardet`,
  `pytest` (see `requirements.txt`).

## Installation
```bash
git clone https://github.com/gonzalez064/income_vs_life_expectancy.git
cd correlations-analysis
python -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt
…
```

## Quick start
```bash
python main_multi_year.py   # prints r & p by year, saves plots/
pytest                      # run unit tests
…
```

## Data
-Life expectancy: INE – “Esperanza de vida a los 65 años”.
-Income: AEAT-INE – “Renta bruta media por persona”.
Both datasets are public domain (Spanish Government open data portal).

Files are provided in data/ for convenience (CSV, ; separator,
European decimals).

## Results (2015-2022)

* **Pearson r ≈ 0.47**, *p* < 0.001 → a moderately strong positive correlation overall.  
* Year-by-year the pattern is fairly stable **except for 2020**: the COVID-19
  pandemic distorted both mortality and economic activity, pulling the
  grand-mean correlation down (excluding 2020, r ≈ 0.6).  
* Full annual coefficients are printed to the console, and the corresponding
  scatter plots are saved in `plots/scatter_YYYY.png`.
